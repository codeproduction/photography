'use strict';(function(l){l.createEventCalendarHolder=function(b){function h(b){a.classList.remove("md-size");a.classList.remove("sm-size");800>=b&&400<b?a.classList.add("md-size"):400>=b&&a.classList.add("sm-size")}let a=document.getElementById(b),e=a.parentElement.offsetWidth;var c="January February March April May June July August September October November December".split(" "),d=new Date;let f=d.getFullYear(),k=d.getMonth();d=`eventCalendar${d.getTime()}`;let m=`<calendar_loader class="calendar_treepl_loader"><svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></calendar_loader><calendar_header class="calendar_treepl_header"><a href="javascript:" class="prev-month" onclick="goToEventCalendarPrevMonth('${d}', '${b}')"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></a><div class="active_month"><div class="active_month_select"><select class="selectMonthDrop" onchange="createEventCalendar('${d}', '${b}')">`;
800>=e&&400<e?a.classList.add("md-size"):400>=e&&a.classList.add("sm-size");for(var g=0;g<c.length;g++)m+=`<option value="${g}">${c[g]}</option>`;m+=`</select></div><div class="active_month_select"><select class="selectYearDrop" onchange="createEventCalendar('${d}', '${b}')">`;for(c=0;20>c;c++)g=2017+c,m+=`<option value="${g}">${g}</option>`;a.innerHTML=m+`</select></div></div><a href="javascript:" class="next-month" onclick="goToEventCalendarNextMonth('${d}', '${b}')"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></a></calendar_header><calendar_treepl_body class="calendar_treepl_body" id="${d}"></calendar_treepl_body><calendar_modal style="display: none;" class="calendar_treepl_modal"></calendar_modal>`;
a.getElementsByClassName("selectMonthDrop")[0].value=k;a.getElementsByClassName("selectYearDrop")[0].value=f;window.addEventListener("resize",()=>{e=a.parentElement.offsetWidth;h(e)});h(e);createEventCalendar(d,b)};l.openEventCalendarMobileModalWindow=function(b,h){var a=document.getElementById(h);if(400<a.parentElement.offsetWidth)return!1;a=a.getElementsByClassName("calendar_treepl_modal")[0];var e=b.getElementsByClassName("calendar_table_event_holder")[0];b=new Date(+e.dataset.time);e=e.getElementsByTagName("a");
h=`<div class="calendar_treepl_modal_content"><div class="title-bar"><strong class="title">${b.toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric"})}</strong><a href="javascript:" class="close" onclick="closeEventCalendarMobileModalWindow('${h}')"><svg fill="#9c9c9c" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" /><path d="M0 0h24v24H0z" fill="none" /></svg></a></div><div class="modal-events-holder"><div class="modal-events-list">`;
for(let a of e)h+=`<div class="event"><a href="${a.getAttribute("href")}">${a.getAttribute("title")}</a></div>`;h+="</div></div></div>";a.innerHTML=h;a.style.display="block"};l.closeEventCalendarMobileModalWindow=function(b){b=document.getElementById(b).getElementsByClassName("calendar_treepl_modal")[0];b.style.display="none";b.innerHTML=""};l.goToEventCalendarPrevMonth=function(b,h){var a=document.getElementById(h);let e=a.getElementsByClassName("selectMonthDrop")[0];a=a.getElementsByClassName("selectYearDrop")[0];
let c=+e.value,d=+a.value,f=c-1;if(0==c&&2017==d)return!1;-1==f&&(f=11,--d);e.value=f;a.value=d;createEventCalendar(b,h)};l.goToEventCalendarNextMonth=function(b,h){var a=document.getElementById(h);let e=a.getElementsByClassName("selectMonthDrop")[0];a=a.getElementsByClassName("selectYearDrop")[0];let c=+e.value,d=+a.value,f=c+1;if(11==c&&d==+a.options[a.options.length-1].value)return!1;12==f&&(f=0,d+=1);e.value=f;a.value=d;createEventCalendar(b,h)};l.createEventCalendar=function(b,h){function a(a){a=
a.getDay();0==a&&(a=7);return a-1}let e=document.getElementById(b);var c=document.getElementById(h);let d=c.getElementsByClassName("calendar_treepl_loader")[0];b=-1!=c.dataset.event_group?c.dataset.event_group:"";var f=c.dataset.module_id,k=c.getElementsByClassName("selectMonthDrop")[0];c=c.getElementsByClassName("selectYearDrop")[0];let m=+k.value;k=+c.value;let g=new Date(k,m),l=new Date;b=`?prop_ModuleId=${f}&prop_ongoingDate=${`${m+1}/1/${k}`}&prop_ParentId=${b}&jsonResponse=1`;let n='<div class="calendar_table"><div class="calendar_table_head"><div class="calendar_table_row"><div class="calendar_table_column">Mon</div><div class="calendar_table_column">Tue</div><div class="calendar_table_column">Wed</div><div class="calendar_table_column">Thu</div><div class="calendar_table_column">Fri</div><div class="calendar_table_column">Sat</div><div class="calendar_table_column">Sun</div></div></div><div class="calendar_table_body"><div class="calendar_table_row">';
f=new XMLHttpRequest;d.style.display="flex";for(k=0;k<a(g);k++)n+='<div class="calendar_table_column"><div class="calendar_table_date other-month"><span></span></div><div class="calendar_table_event_holder"></div></div>';f.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var b=JSON.parse(this.responseText).items;for(b=b.sort(function(a,b){return(new Date(a.eventdatestart)).getTime()-(new Date(b.eventdatestart)).getTime()});g.getMonth()==m;){var c="",f=g.getTime();l.getMonth()==
g.getMonth()&&l.getDate()==g.getDate()&&(c="today");n+=`<div class="calendar_table_column" onclick="openEventCalendarMobileModalWindow(this, '${h}');"><div class="calendar_table_date ${c}"><span>${g.getDate()}</span></div><div class="calendar_table_event_holder" data-time="${f}"></div></div>`;6==a(g)%7&&(n+='</div><div class="calendar_table_row">');g.setDate(g.getDate()+1)}if(0!=a(g))for(c=a(g);7>c;c++)n+='<div class="calendar_table_column"><div class="calendar_table_date other-month"><span></span></div><div class="calendar_table_event_holder"></div></div>';
n+="</div></div></div>";e.innerHTML=n;c=e.getElementsByClassName("calendar_table_row");for(let a of b){b=(new Date(a.eventdatestart.split("T")[0])).setHours(0,0,0);f=(new Date(a.eventdateend.split("T")[0])).setHours(0,0,0);for(let d of c){var k=d.getElementsByClassName("calendar_table_event_holder");let c=0;for(let d of k)if(d.dataset.time){k=+d.dataset.time;let e=d.innerHTML;if(b<=k&&f>=k){let b="";0==c&&(b=a.Name,c++);d.innerHTML=e+`<a href="${a.url}" title="${a.Name.replace(/"/gim,"&#34;")}" class="calendar_table_event"><span>${b}</span></a>`}if(f<
k)break}}}d.style.display="none"}};f.open("GET",b,!0);f.send()}})(window);