'use strict';(function(){function g(){var a=document.querySelectorAll('[name="Payment_ItemQuantity"]'),b=document.querySelectorAll('[name="Payment_GiftVoucher"]');let e=document.querySelectorAll('[name="Payment_DiscountCode"]');for(let d=0;d<a.length;d++)a[d].onchange=function(a){a.preventDefault();a=a.target.closest("form");f(a)};for(a=0;a<b.length;a++)b[a].onchange=function(a){a.preventDefault();a=a.target.closest("form");f(a)};for(b=0;b<e.length;b++)e[b].onchange=function(a){a.preventDefault();
a=a.target.closest("form");f(a)}}function f(a){let b=a.Payment_Amount?+a.Payment_Amount.value:0,e=a.Payment_GiftVoucher?a.Payment_GiftVoucher.value:"",d=a.Payment_DiscountCode?a.Payment_DiscountCode.value:"",c=a.Payment_ItemQuantity?a.Payment_ItemQuantity.value:"",f=a.Payment_ModuleItemId?a.Payment_ModuleItemId.value:0,g=h(a.action,"form");k("GET",`/public/api/forms/calculate-form-totalcost?Price=${b}&GiftVoucherCode=${e}&DiscountCode=${d}&Quantity=${c}&EventId=${f}&FormAlias=${g}`,{},function(b){a.querySelectorAll('[id="PaymentTotalCost"]')[0].value=
b})}function k(a,b,e,d){let c=new XMLHttpRequest;c.onload=c.onerror=function(){if(200==this.status)d&&d(JSON.parse(c.response));else if(400==this.status){let a=JSON.parse(c.response).Message;alert(a)}};c.open(a,b,!0);c.setRequestHeader("Content-Type","application/json");c.send(JSON.stringify(e))}function h(a,b){a=new URL(a);return(new URLSearchParams(a.search)).get(b)}document.addEventListener("DOMContentLoaded",function(a){g()})})();
